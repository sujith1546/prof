<!-- Share Food Page Content (without HTML wrapper) -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f3f4f6;
    margin: 0;
    padding: 0;
  }

  /* Layout */
  .container {
    display: flex;
    min-height: 100vh;
  }

  /* Sidebar */
  .sidebar {
    width: 260px;
    background-color: #ffffff;
    border-right: 1px solid #e0e0e0;
    padding: 20px 0;
    border-radius: 8px 0 0 8px;
  }

  .menu-header {
    padding: 0 20px 15px 20px;
    border-bottom: 1px solid #e5e7eb;
    margin-bottom: 10px;
  }

  .menu-header h3 {
    font-size: 16px;
    font-weight: 600;
    color: #111827;
    margin: 0;
  }

  .menu-item {
    padding: 12px 20px;
    margin: 4px 12px;
    background-color: transparent;
    color: #374151;
    border: none;
    border-radius: 6px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 12px;
    width: calc(100% - 24px);
    text-align: left;
  }

  .menu-item i {
    width: 20px;
    text-align: center;
    font-size: 16px;
  }

  .menu-item.active,
  .menu-item:hover {
    background-color: #2563eb;
    color: #ffffff;
  }

  /* Content Area */
  .content-area {
    flex: 1;
    padding: 30px;
    overflow-y: auto;
    background-color: #ffffff;
    border-radius: 0 8px 8px 0;
  }

  .section {
    display: none;
    max-width: 900px;
  }

  .section.active {
    display: block;
  }

  /* Form Card */
  .card {
    background: #f9fafb;
    border-radius: 8px;
    padding: 30px;
    border: 1px solid #e5e7eb;
    margin-bottom: 20px;
  }

  .card h2 {
    font-size: 20px;
    font-weight: 600;
    color: #111827;
    margin-bottom: 20px;
  }

  .form-group {
    margin-bottom: 16px;
  }

  .form-group label {
    display: block;
    font-weight: 500;
    margin-bottom: 6px;
    font-size: 14px;
    color: #374151;
  }

  .form-group input, 
  .form-group textarea, 
  .form-group select {
    width: 100%;
    padding: 12px;
    border-radius: 6px;
    border: 1px solid #d1d5db;
    font-size: 14px;
    font-family: inherit;
    background: #ffffff;
  }

  .form-group textarea { resize: vertical; min-height: 80px; }

  .form-group input:focus,
  .form-group textarea:focus,
  .form-group select:focus {
    outline: none;
    border-color: #2563eb;
  }

  .btn-primary {
    background-color: #2563eb;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  .btn-primary:hover {
    background-color: #1d4ed8;
  }

  /* Food List */
  .food-list {
    margin-top: 20px;
  }

  .food-item {
    display: flex;
    justify-content: space-between;
    padding: 12px;
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    margin-bottom: 12px;
    align-items: center;
    transition: all 0.3s ease;
  }

  .food-item.fade-out {
    opacity: 0;
    transform: translateX(-20px);
  }

  .food-item.slide-up {
    transform: translateY(-10px);
    opacity: 0;
  }

  .food-item span {
    font-weight: 500;
    color: #111827;
  }

  .food-item button {
    background-color: #ef4444;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 13px;
    margin-left: 8px;
    transition: all 0.2s ease;
  }

  .food-item button:hover { background-color: #dc2626; }

  .btn-success {
    background-color: #10b981;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 13px;
    margin-left: 8px;
    transition: all 0.2s ease;
  }

  .btn-success:hover { background-color: #059669; }

  .btn-success:disabled {
    background-color: #9ca3af;
    cursor: not-allowed;
  }

  .status-badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
    margin-right: 10px;
    transition: all 0.3s ease;
  }

  .status-pending {
    background-color: #fef3c7;
    color: #d97706;
  }

  .status-claimed {
    background-color: #d1fae5;
    color: #065f46;
  }

  .status-delivered {
    background-color: #dbeafe;
    color: #1e40af;
  }

  .food-details {
    flex: 1;
  }

  .food-meta {
    font-size: 12px;
    color: #6b7280;
    margin-top: 4px;
  }

  .food-notes {
    font-size: 12px;
    color: #6b7280;
    font-style: italic;
    margin-top: 4px;
  }

  .food-actions {
    display: flex;
    align-items: center;
  }

  .category-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 500;
    margin-left: 8px;
    background-color: #e5e7eb;
    color: #374151;
  }

  .posted-time {
    font-size: 11px;
    color: #6b7280;
    margin-top: 2px;
  }

  /* Notification System */
  .notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 16px 20px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    border-left: 4px solid #10b981;
    display: flex;
    align-items: center;
    gap: 12px;
    max-width: 350px;
    z-index: 1000;
    transform: translateX(100%);
    opacity: 0;
    transition: all 0.3s ease;
  }

  .notification.show {
    transform: translateX(0);
    opacity: 1;
  }

  .notification.hide {
    transform: translateX(100%);
    opacity: 0;
  }

  .notification.success {
    border-left-color: #10b981;
  }

  .notification.info {
    border-left-color: #3b82f6;
  }

  .notification.warning {
    border-left-color: #f59e0b;
  }

  .notification.error {
    border-left-color: #ef4444;
  }

  .notification-icon {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 12px;
  }

  .notification.success .notification-icon {
    background: #10b981;
  }

  .notification.info .notification-icon {
    background: #3b82f6;
  }

  .notification.warning .notification-icon {
    background: #f59e0b;
  }

  .notification.error .notification-icon {
    background: #ef4444;
  }

  .notification-content {
    flex: 1;
  }

  .notification-title {
    font-weight: 600;
    color: #111827;
    font-size: 14px;
    margin-bottom: 2px;
  }

  .notification-message {
    color: #6b7280;
    font-size: 13px;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .container { flex-direction: column; }
    .sidebar { width: 100%; border-radius: 8px 8px 0 0; padding: 10px 0; border-bottom: 1px solid #e0e0e0; }
    .menu-header { display: none; }
    .menu-item { display: inline-flex; width: auto; margin: 4px 8px; }
    .content-area { padding: 20px; border-radius: 0 0 8px 8px; }
    .food-item {
      flex-direction: column;
      align-items: flex-start;
      gap: 10px;
    }
    .food-actions {
      width: 100%;
      justify-content: flex-end;
    }
    .notification {
      left: 20px;
      right: 20px;
      max-width: none;
    }
  }
</style>

<div class="container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="menu-header"><h3>Share Food</h3></div>
    <button class="menu-item active" data-section="postFood"><i class="fas fa-plus"></i> Post Food</button>
    <button class="menu-item" data-section="myPosts"><i class="fas fa-list"></i> My Posts</button>
    <button class="menu-item" data-section="history"><i class="fas fa-history"></i> Donation History</button>
  </aside>

  <!-- Content Area -->
  <div class="content-area">
    <!-- Post Food Section -->
    <section id="postFood" class="section active">
      <div class="card">
        <h2>Post Food for Those in Need</h2>

        <div class="form-group">
          <label for="foodName">Food Item</label>
          <input type="text" id="foodName" placeholder="Enter food item name">
        </div>

        <div class="form-group">
          <label for="foodCategory">Food Category</label>
          <select id="foodCategory">
            <option value="">Select Category</option>
            <option value="cooked">Cooked Meal</option>
            <option value="packaged">Packaged Food</option>
            <option value="fresh">Fresh Produce</option>
            <option value="baked">Baked Goods</option>
            <option value="dairy">Dairy Products</option>
            <option value="beverages">Beverages</option>
            <option value="snacks">Snacks</option>
            <option value="other">Other</option>
          </select>
        </div>

        <div class="form-group">
          <label for="quantity">Quantity</label>
          <input type="text" id="quantity" placeholder="Enter quantity (e.g., 10 packets, 5 kg)">
        </div>

        <div class="form-group">
          <label for="expiry">Expiry / Best Before</label>
          <input type="date" id="expiry">
        </div>

        <div class="form-group">
          <label for="location">Pickup Location</label>
          <input type="text" id="location" placeholder="Enter address for pickup">
        </div>

        <div class="form-group">
          <label for="contact">Contact Information</label>
          <input type="text" id="contact" placeholder="Phone number for coordination">
        </div>

        <div class="form-group">
          <label for="notes">Notes (Optional)</label>
          <textarea id="notes" placeholder="Any special instructions, dietary info, or additional details"></textarea>
        </div>

        <button class="btn-primary" id="postFoodBtn">Post Food</button>
      </div>
    </section>

    <!-- My Posts Section -->
    <section id="myPosts" class="section">
      <div class="card">
        <h2>My Active Posts</h2>
        <div class="food-list" id="foodList">
          <!-- Sample active posts -->
          <div class="food-item">
            <div class="food-details">
              <span>Fresh Vegetable Curry - 8 servings <span class="category-badge">Cooked Meal</span></span>
              <div class="food-meta">Expires: 2024-01-15 | Location: 123 Main Street | Contact: +1 555-0123</div>
              <div class="posted-time">Posted on: <span class="posted-time-value">2024-01-10 14:30:25</span></div>
              <div class="food-notes">Vegetarian, no allergens</div>
            </div>
            <div class="food-actions">
              <span class="status-badge status-pending">Pending</span>
              <button class="btn-success">Mark Claimed</button>
              <button class="btn-danger">Remove</button>
            </div>
          </div>
          <div class="food-item">
            <div class="food-details">
              <span>Bread & Pastries - 12 pieces <span class="category-badge">Baked Goods</span></span>
              <div class="food-meta">Expires: 2024-01-14 | Location: 456 Oak Avenue | Contact: +1 555-0456</div>
              <div class="posted-time">Posted on: <span class="posted-time-value">2024-01-10 10:15:42</span></div>
              <div class="food-notes">Fresh from bakery</div>
            </div>
            <div class="food-actions">
              <span class="status-badge status-pending">Pending</span>
              <button class="btn-success">Mark Claimed</button>
              <button class="btn-danger">Remove</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Donation History Section -->
    <section id="history" class="section">
      <div class="card">
        <h2>Donation History</h2>
        <div class="food-list" id="historyList">
          <!-- Sample history items -->
          <div class="food-item">
            <div class="food-details">
              <span>Rice & Lentils - 15 meals <span class="category-badge">Cooked Meal</span></span>
              <div class="food-meta">Donated: 2024-01-10 | Location: Community Center</div>
              <div class="posted-time">Posted on: <span class="posted-time-value">2024-01-09 16:20:15</span></div>
              <div class="food-notes">Helped 5 families</div>
            </div>
            <div class="food-actions">
              <span class="status-badge status-delivered">Delivered</span>
            </div>
          </div>
          <div class="food-item">
            <div class="food-details">
              <span>Fruits & Vegetables - 8 kg <span class="category-badge">Fresh Produce</span></span>
              <div class="food-meta">Donated: 2024-01-08 | Location: Local Shelter</div>
              <div class="posted-time">Posted on: <span class="posted-time-value">2024-01-07 09:45:33</span></div>
              <div class="food-notes">Fresh produce</div>
            </div>
            <div class="food-actions">
              <span class="status-badge status-delivered">Delivered</span>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

<script>
  // Global initialization function for share food page
  window.initShareFood = function() {
    console.log('Initializing Share Food Page...');
    
    // Tab Switching - using event delegation
    const sidebar = document.querySelector('.sidebar');
    if (sidebar) {
      sidebar.addEventListener('click', function(e) {
        if (e.target.classList.contains('menu-item') || e.target.closest('.menu-item')) {
          const menuItem = e.target.classList.contains('menu-item') ? e.target : e.target.closest('.menu-item');
          const menuItems = document.querySelectorAll('.menu-item');
          const sections = document.querySelectorAll('.section');
          
          menuItems.forEach(i => i.classList.remove('active'));
          menuItem.classList.add('active');
          
          const target = menuItem.dataset.section;
          sections.forEach(section => section.classList.remove('active'));
          document.getElementById(target).classList.add('active');
        }
      });
    }

    // Food Posting Logic
    const postFoodBtn = document.getElementById('postFoodBtn');
    if (postFoodBtn) {
      postFoodBtn.addEventListener('click', postFood);
    }

    // Remove food item - using event delegation
    const foodList = document.getElementById('foodList');
    if (foodList) {
      foodList.addEventListener('click', function(e) {
        if (e.target && e.target.classList.contains('btn-danger')) {
          removeFood(e.target);
        } else if (e.target && e.target.classList.contains('btn-success')) {
          markAsClaimed(e.target);
        }
      });
    }

    // Function to get current date and time
    function getCurrentDateTime() {
      const now = new Date();
      const year = now.getFullYear();
      const month = String(now.getMonth() + 1).padStart(2, '0');
      const day = String(now.getDate()).padStart(2, '0');
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      
      return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
    }

    // Notification System
    function showNotification(type, title, message) {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      
      const icon = type === 'success' ? 'fas fa-check' : 
                   type === 'info' ? 'fas fa-info-circle' :
                   type === 'warning' ? 'fas fa-exclamation-triangle' :
                   'fas fa-times-circle';
      
      notification.innerHTML = `
        <div class="notification-icon">
          <i class="${icon}"></i>
        </div>
        <div class="notification-content">
          <div class="notification-title">${title}</div>
          <div class="notification-message">${message}</div>
        </div>
      `;
      
      document.body.appendChild(notification);
      
      // Show notification with animation
      setTimeout(() => {
        notification.classList.add('show');
      }, 100);
      
      // Hide and remove after 4 seconds
      setTimeout(() => {
        notification.classList.remove('show');
        notification.classList.add('hide');
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 4000);
    }

    // Food Posting Logic
    function postFood() {
      const name = document.getElementById('foodName').value;
      const category = document.getElementById('foodCategory').value;
      const quantity = document.getElementById('quantity').value;
      const expiry = document.getElementById('expiry').value;
      const notes = document.getElementById('notes').value;
      const location = document.getElementById('location').value;
      const contact = document.getElementById('contact').value;

      if(!name || !quantity || !location || !category) {
        showNotification('error', 'Missing Information', 'Please fill in all required fields.');
        return;
      }

      const list = document.getElementById('foodList');
      const item = document.createElement('div');
      item.className = 'food-item';
      
      const categoryText = getCategoryText(category);
      const postedTime = getCurrentDateTime();
      
      item.innerHTML = `
        <div class="food-details">
          <span>${name} - ${quantity} <span class="category-badge">${categoryText}</span></span>
          <div class="food-meta">${expiry ? 'Expires: ' + expiry + ' | ' : ''}Location: ${location} ${contact ? '| Contact: ' + contact : ''}</div>
          <div class="posted-time">Posted on: <span class="posted-time-value">${postedTime}</span></div>
          ${notes ? `<div class="food-notes">${notes}</div>` : ''}
        </div>
        <div class="food-actions">
          <span class="status-badge status-pending">Pending</span>
          <button class="btn-success">Mark Claimed</button>
          <button class="btn-danger">Remove</button>
        </div>
      `;
      
      list.appendChild(item);

      // Show success notification
      showNotification('success', 'Food Posted Successfully', 'Your food donation has been posted and will help someone in need.');

      // Clear input fields
      document.getElementById('foodName').value = '';
      document.getElementById('foodCategory').value = '';
      document.getElementById('quantity').value = '';
      document.getElementById('expiry').value = '';
      document.getElementById('location').value = '';
      document.getElementById('contact').value = '';
      document.getElementById('notes').value = '';
    }

    function getCategoryText(category) {
      const categories = {
        'cooked': 'Cooked Meal',
        'packaged': 'Packaged Food',
        'fresh': 'Fresh Produce',
        'baked': 'Baked Goods',
        'dairy': 'Dairy Products',
        'beverages': 'Beverages',
        'snacks': 'Snacks',
        'other': 'Other'
      };
      return categories[category] || 'Uncategorized';
    }

    function removeFood(btn) {
      const item = btn.closest('.food-item');
      const foodName = item.querySelector('.food-details span').textContent;
      
      // Add fade-out animation
      item.classList.add('fade-out');
      
      setTimeout(() => {
        item.remove();
        showNotification('info', 'Food Post Removed', 'The food donation has been successfully removed from your active posts.');
      }, 300);
    }

    function markAsClaimed(btn) {
      const item = btn.closest('.food-item');
      const statusBadge = item.querySelector('.status-badge');
      const foodName = item.querySelector('.food-details span').textContent;
      
      // Update status with animation
      statusBadge.className = 'status-badge status-claimed';
      statusBadge.textContent = 'Claimed';
      
      // Disable the mark claimed button
      btn.disabled = true;
      btn.textContent = 'Claimed';
      
      showNotification('success', 'Food Claimed', 'Your food donation has been claimed by a delivery volunteer.');
      
      // Move to history after 2 seconds with animation
      setTimeout(() => {
        const historyList = document.getElementById('historyList');
        
        // Add slide-up animation
        item.classList.add('slide-up');
        
        setTimeout(() => {
          // Update to delivered status
          statusBadge.className = 'status-badge status-delivered';
          statusBadge.textContent = 'Delivered';
          
          // Remove action buttons for history
          item.querySelector('.food-actions').innerHTML = `
            <span class="status-badge status-delivered">Delivered</span>
          `;
          
          // Remove animation class
          item.classList.remove('slide-up');
          
          historyList.appendChild(item);
          
          showNotification('success', 'Food Delivered', 'Your food donation has been successfully delivered to those in need. Thank you for your generosity!');
        }, 300);
      }, 2000);
    }
  };

  // Initialize immediately if script loads after DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', window.initShareFood);
  } else {
    window.initShareFood();
  }
</script>
